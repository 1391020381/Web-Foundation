#   DNS 缓存和TTL<存活时间  Time-to-live>



![](https://raw.githubusercontent.com/1391020381/Web-Foundation/master/articles/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/img/%E4%BB%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E8%A7%92%E5%BA%A6%E7%9C%8BDNS%E7%BC%93%E5%AD%98.png)

# 影响DNS缓存的因素
* 首先,服务器可以表明记录可以被缓存多久。查找返回的DNS记录包含了一个存活时间(Time-to-live,TTL)。
该值告诉客户端可以对该记录缓存多久。
* 尽管操作系统缓存会考虑TTL值,但浏览器通常忽略该值,并设置它自己的时间限制。此外，Keep-Alive特性可以同时覆盖TTL
和浏览器的时间限制。换句话说,只要浏览器和Web服务器愉快地通信着,并保持着TCP连接打开的状态,就没有理由进行DNS查找。
* 浏览器对缓存的DNS记录的数量也有限制,而不管缓存记录的时间。如果用户在短时间内访问了很多具有不同域名的网站,较早的DNS
记录将被丢弃,必须重新查找该域名。
* 不过,要记得即便浏览器丢弃了DNS记录,操作系统可能依然保留着该记录,这能扭转一下局面,因为无需通过网络发送查询,从而避免了
明显的延迟。
# 减少DNS查找
* 当客户端的DSN缓存为空(浏览器和操作系统都是)时,DNS查找的数量与Web页面中唯一主机名的数量相等。这包括页面的
ulr、图片、脚本文件、样式表、Flash对象等主机名。减少唯一主机名的数量就可以减少DNS查找的数量。
* 建议将这些组件分别放到至少2个,但不要超过4个主机名下。这是在减少DNS查找和允许高度并行下载之间作出的很好的权衡。
* 开启 keep-alive
